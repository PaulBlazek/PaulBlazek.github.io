<!DOCTYPE html>
<html>
    <head>
        <title>Paradoxia</title>
        <style>
            body {
                text-align: center;
                font-size: 20px;
                background-color:cornsilk;
            }

            img {
                width: 800px;
                cursor: pointer;
            }

            button {
                height: 50px;
                width: 50px;
                font-style: bold;
            }

            a {
                text-decoration: underline blue;
                color: blue;
                cursor: pointer;
            }

            .coder {
                color: orange;
            }

            .ortho {
                color: green;
            }

            .show {
                width: 20%;
            }

            #log {
                width: 50%;
                display: none;
                background-color: #dddddd;
                font-size: 15px;
                font-family: monospace;
                margin: auto;
            }
        </style>
        <script>
            var txtBefore;
            var comicElement;
            var txtAfter;
            var linkTxt;
            var comicsAmount = 4;
            var cComic = comicsAmount;
            var gifs = [2,3];
            var comicText = [
                [],
                ['Chapter 1','<p>A boy stands in a room.</p><p>What is this boy\'s name?</p>','Enter Name'],
                ['','<p>Your name is CALEB BLAZEK. You are in the COMPUTER ROOM of your BUNKER. Something is supposed to happen today, but you can\'t remember what.</p><p>Someone is trying to message you on your computer.</p>','Answer'],
                ['','<button class="show">Dialog</button><br/><p id="log"></p>','> Get the Alpha'],
                ['','<p>You slide down your awesome quick-descent pole, and take the door on your left to arrive at the postal center.</p><p>This conveyor belt brings mail into your bunker securely and deposits it in the bin.</p>','> ?']
            ];
            var logs = {
                3: [
                    'CoderBlaze12: Hey Caleb?',
                    'OrthodoxBoy: Yes?',
                    'CB: Have you got your mail yet today?',
                    'OB: Why do you ask?',
                    'CB: You should be receiving the Paradoxia Alpha disks today.',
                    'CB: I\'ve already downloaded the server on my end, so once you get the client installed we can get started.',
                    'OB: Ah, I see.',
                    'OB: I haven\'t checked yet. I\'ll do that.',
                    'CB: Thanks. Looking forward to trying this thing out.',
                    'CB: There was a basic manual included with the server disk, but a lot of it is blurred for some reason.'
                ]

            }
            var imgWidths = [
                null,
                '400px'
            ];
            var multiImg = {
                4: ['scene4-1.gif','scene4-2.png']
            };

            addEventListener("keydown",function(e){
                var code = e.keyCode;
                console.log(code);
                if (code == 37){ // Left
                    previous();
                } else if (code == 39){ // Right
                    next();
                }
            })

            function refreshComic(){
                txtBefore.innerHTML = '<h1>'+comicText[cComic][0]+'</h1>';

                txtAfter.innerHTML = comicText[cComic][1];
                linkTxt.innerHTML = comicText[cComic][2];
                imagesElement.innerHTML = "<img id='comic' src='' onclick='next();'/>";
                comicElement = document.getElementById("comic");

                var gif = false;
                for (var i = 0; i < gifs.length; i++){
                    if (cComic == gifs[i]){
                        comicElement.src = 'images/scene'+cComic+'.gif';
                        gif = true;
                    }
                }

                if (!gif){
                    comicElement.src = 'images/scene'+cComic+'.png';
                }

                if (multiImg[cComic]){
                    imagesElement.innerHTML = '';
                    for (var i = 0; i < multiImg[cComic].length; i++){
                        imagesElement.innerHTML += '<img src="images/'+multiImg[cComic][i]+'""/>';
                    }
                }
                
                if (imgWidths[cComic]){
                    comicElement.style.width = imgWidths[cComic];
                } else {
                    comicElement.style.width = '800px';
                }

                if (document.getElementsByClassName('show').length){
                    document.getElementsByClassName('show')[0].onclick = showHideLog;
                    document.getElementsByClassName('show')[0].innerHTML = document.getElementsByClassName('show')[0].innerHTML+' (Show/Hide)';
                    initializeLog();
                }
            }

            function showHideLog(){
                document.getElementById('log').style.backgroundColor = '#DDDDDD';
                if (document.getElementById('log').style.display != "block"){
                    document.getElementById('log').style.display = "block";
                } else {
                    document.getElementById('log').style.display = "none";
                }
            }

            function initializeLog(){
                log = document.getElementById("log");
                log.innerHTML = '';
                for (var i = 0; i < logs[cComic].length; i++){
                    cClass = '';
                    if (logs[cComic][i].search("CB:") != -1 || logs[cComic][i].search("CoderBlaze12:") != -1){cClass = 'coder';}
                    if (logs[cComic][i].search("OB:") != -1 || logs[cComic][i].search("OrthodoxBoy:") != -1){cClass = 'ortho';}
                    log.innerHTML += '<p class='+cClass+'>'+logs[cComic][i]+'</p>';
                }
            }

            function first(){
                cComic = 1;
                refreshComic();
            }

            function latest(){
                cComic = comicsAmount;
                refreshComic();
            }

            function next(){
                cComic += 1;
                if (cComic > comicsAmount){
                    cComic = comicsAmount;
                }
                refreshComic();
            }

            function previous(){
                cComic -= 1;
                if (cComic < 1){
                    cComic = 1;
                }
                refreshComic();
            }
        </script>
    </head>
    <body>
        <script>
            document.body.onload = function(){
                comicElement = document.getElementById("comic");
                imagesElement = document.getElementById("comicImages");
                txtBefore = document.getElementById("beforeComic");
                txtAfter = document.getElementById("afterComic");
                linkTxt = document.getElementById("nextLink");
                refreshComic();
            }
        </script>
        <img src='images/logo.png' onclick='first();'/>
        <hr/>
        <nav>
            <button onclick='first();'><<</button>
            <button onclick='previous();'><</button>
            <button onclick='next();'>></button>
            <button onclick='latest();'>>></button>
        </nav>
        <hr/>
        <div id='beforeComic'></div>
        <div id='comicImages'>
            <img id='comic' src='' onclick='next();'/>
        </div>
        <div id='afterComic'></div>
        <p><a id='nextLink' onclick='next();'>></a></p>
    </body>
</html>
